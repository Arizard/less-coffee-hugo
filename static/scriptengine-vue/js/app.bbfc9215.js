(function(t){function e(e){for(var o,a,s=e[0],c=e[1],l=e[2],u=0,h=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&h.push(r[a][0]),r[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);d&&d(e);while(h.length)h.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={app:0},i=[];function a(t){return s.p+"js/"+({about:"about"}[t]||t)+"."+{about:"ef082706"}[t]+".js"}function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,o){n=r[t]=[e,o]}));e.push(n[2]=o);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=a(t);var l=new Error;i=function(e){c.onerror=c.onload=null,clearTimeout(u);var n=r[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",l.name="ChunkLoadError",l.type=o,l.request=i,n[1](l)}r[t]=void 0}};var u=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(e)},s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/scriptengine-vue/",s.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var d=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"02cd":function(t,e,n){},"034f":function(t,e,n){"use strict";var o=n("85ec"),r=n.n(o);r.a},"37b8":function(t,e,n){"use strict";var o=n("02cd"),r=n.n(o);r.a},3994:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-gray-100",attrs:{id:"app"}},[n("SeNavigation"),n("div",{staticClass:"container mx-auto px-4"},[n("router-view")],1)],1)},i=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"flex items-center justify-between flex-wrap bg-indigo-500 p-6 mb-8"},[t._m(0),n("div",{staticClass:"block lg:hidden"},[n("button",{staticClass:"flex items-center px-3 py-2 border rounded text-indigo-200 border-indigo-400 hover:text-white hover:border-white",on:{click:t.toggleNavLinks,blur:t.hideNavLinks}},[n("svg",{staticClass:"fill-current h-3 w-3",attrs:{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"}},[n("title",[t._v("Menu")]),n("path",{attrs:{d:"M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"}})])])]),n("div",{staticClass:"w-full block flex-grow lg:flex lg:items-center lg:w-auto",class:t.navLinksContainerClass},[n("div",{staticClass:"text-sm lg:flex-grow"},[n("router-link",{staticClass:"block mt-4 lg:inline-block lg:mt-0 text-indigo-200 hover:text-white mr-4",attrs:{to:"/"}},[t._v(" Home ")]),n("router-link",{staticClass:"block mt-4 lg:inline-block lg:mt-0 text-indigo-200 hover:text-white mr-4",attrs:{to:"/editor"}},[t._v(" Editor ")]),n("router-link",{staticClass:"block mt-4 lg:inline-block lg:mt-0 text-indigo-200 hover:text-white mr-4",attrs:{to:"/about"}},[t._v(" About ")])],1)])])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex items-center flex-shrink-0 text-white mr-6"},[n("span",{staticClass:"font-semibold text-xl tracking-tight"},[t._v("ScriptEngine")])])}],c={name:"SeNavigation",data:function(){return{navLinksShown:!1}},computed:{navLinksContainerClass:function(){return this.navLinksShown?"":["hidden"]}},methods:{toggleNavLinks:function(){this.hideNavLinksTimeout&&(clearInterval(this.hideNavLinksTimeout),this.hideNavLinksInterval=void 0),this.navLinksShown=!this.navLinksShown},hideNavLinks:function(){var t=this;this.hideNavLinksTimeout=setTimeout((function(){t.navLinksShown=!1}),250)}}},l=c,u=(n("37b8"),n("2877")),d=Object(u["a"])(l,a,s,!1,null,"59fbd786",null),h=d.exports,f={components:{SeNavigation:h}},m=f,v=(n("034f"),Object(u["a"])(m,r,i,!1,null,null,null)),p=v.exports,g=(n("d3b7"),n("8c4f")),b=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},w=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("article",{staticClass:"prose lg:prose-xl mx-auto"},[n("h2",[t._v("ScriptEngine")]),n("p",[t._v("Go to the Editor tab by clicking the navigation above.")])])])}],k={name:"Home",components:{}},y=k,x=Object(u["a"])(y,b,w,!1,null,null,null),_=x.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.ready?n("se-editor",{key:t.id,attrs:{document:t.document},on:{onSave:t.handleSave}}):t._e()],1)},S=[],O=(n("99af"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"max-w-full w-full "},[n("div",{attrs:{id:"editor-ribbon"}},[n("div",{staticClass:"bg-white p-2 text-indigo-700",attrs:{id:"editor-document-title"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"w-full truncate p-2",attrs:{type:"text"},domProps:{value:t.title},on:{blur:t.handleSave,input:function(e){e.target.composing||(t.title=e.target.value)}}})])]),n("div",{staticClass:"wide mx-auto max-w-4xl font-sans text-md pt-8 prose max-w-4xl",attrs:{id:"editor-container"}})])}),L=[],E=n("9336"),M=n.n(E),D=(n("4160"),n("b0c0"),n("159b"),n("d4ec")),j=n("bee2"),N=[{name:"counts",placeholder:"0"},{name:"moveName",placeholder:"Move Name"},{name:"outcome",placeholder:"Move outcome"},{name:"cues",placeholder:"Related cue"}],T='<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-volume-3" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">\n  <path stroke="none" fill="none" d="M0 0h24v24H0z"/>\n  <path stroke="currentColor" fill="none" d="M6 15 h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" />\n  <path stroke="currentColor" fill="none" d="M16 10l4 4m0 -4l-4 4" />\n</svg>',H='<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-volume" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round">\n  <path stroke="none" fill="none" d="M0 0h24v24H0z"/>\n  <path stroke="currentColor" fill="none" d="M15 8a5 5 0 0 1 0 8" />\n  <path stroke="currentColor" fill="none" d="M17.7 5a9 9 0 0 1 0 14" />\n  <path stroke="currentColor" fill="none" d="M6 15 h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5" />\n</svg>',A=function(){function t(e){var n=e.data;Object(D["a"])(this,t),this.data=n}return Object(j["a"])(t,null,[{key:"toolbox",get:function(){return{title:"Outcomes Block",icon:'<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-run" width="22" height="22" viewBox="0 0 24 24" stroke-width="2" stroke="#000000" fill="#ffffff" stroke-linecap="round" stroke-linejoin="round">\n  <path stroke="none" fill="none" d="M0 0h24v24H0z"/>\n  <circle stroke="currentColor" cx="13" cy="4" r="1" />\n  <path fill="none" stroke="currentColor" d="M4 17l5 1l.75 -1.5" />\n  <path fill="none" stroke="currentColor" d="M15 21l0 -4l-4 -3l1 -6" />\n  <path fill="none" stroke="currentColor" d="M7 12l0 -3l5 -1l3 3l3 1" />\n</svg>'}}}]),Object(j["a"])(t,[{key:"render",value:function(){var t=this;this.wrapper=document.createElement("div"),this.wrapper.classList.add("outcomes-block","rounded-md","selected:bg-blue-100"),this.wrapper.innerHTML="";var e=document.createElement("div");return e.classList.add("outcomes-block-icons"),e.id="icons",e.innerHTML="",this.wrapper.appendChild(e),N.forEach((function(e){var n=e.name,o=document.createElement("div");o.classList.add("outcomes-block-cell"),o.setAttribute("contenteditable","true"),o.setAttribute("data-placeholder",e.placeholder),o.id=n,t.data&&t.data[n]&&(o.innerHTML=t.data[n]),t.wrapper.appendChild(o)})),this._refreshIcons(),this.wrapper}},{key:"_toggleWithSofter",value:function(){this._toggleVolume("softer"),this._refreshIcons()}},{key:"_toggleWithLouder",value:function(){this._toggleVolume("louder"),this._refreshIcons()}},{key:"_toggleVolume",value:function(t){t!==this.data.volume?this.data.volume=t:this.data.volume=""}},{key:"_refreshIcons",value:function(){var t=this.wrapper.querySelector("#icons");"softer"===this.data.volume?t.innerHTML=T:"louder"===this.data.volume?t.innerHTML=H:t.innerHTML=""}},{key:"renderSettings",value:function(){var t=this,e=[{name:"withSofter",icon:T,onClick:function(){return t._toggleWithSofter()}},{name:"withLouder",icon:H,onClick:function(){return t._toggleWithLouder()}}],n=document.createElement("div");return e.forEach((function(t){var e=document.createElement("div");e.classList.add("cdx-settings-button"),e.innerHTML=t.icon,e.addEventListener("click",t.onClick),n.appendChild(e)})),n}},{key:"save",value:function(t){return{counts:t.querySelector("#counts").innerHTML,moveName:t.querySelector("#moveName").innerHTML,outcome:t.querySelector("#outcome").innerHTML,cues:t.querySelector("#cues").innerHTML,volume:this.data.volume}}}]),t}(),B=(n("c21f"),n("3ecd")),$={name:"se-editor",props:["document"],data:function(){return{title:"Untitled"}},methods:{createEditor:function(){var t=this;this.editor=new M.a({holder:"editor-container",tools:{header:{class:B},outcomes:{class:A,inlineToolbar:["bold","italic"]}},data:this.document?this.document:{},onChange:function(){t.$emit("onChange",{editor:t.editor}),t.handleSave()}}),console.log("created editor")},destroyEditor:function(){var t=this;this.editor&&this.editor.isReady.then((function(){t.editor.destroy(),console.log("destroyed editor")}))},handleSaveMetadata:function(t){return t.title=this.title,t},handleSave:function(){var t=this;this.editor&&this.editor.save().then((function(e){t.$emit("onSave",t.handleSaveMetadata(e))}))},updateEditorMetadata:function(){this.title=this.document?this.document.title:this.title}},mounted:function(){this.createEditor(),this.updateEditorMetadata()},destroyed:function(){this.destroyEditor()}},P=$,I=(n("d90d"),Object(u["a"])(P,O,L,!1,null,null,null)),R=I.exports,z={DOCUMENT_NOT_FOUND:"document not found",BAD_ID_ARG:"bad id argument",BAD_DOC_ARG:"bad document argument"},G=function(){function t(){Object(D["a"])(this,t),this.provider="9440E756-1B93-445A-936E-9562FFA7EBB8",this.storage=window.localStorage}return Object(j["a"])(t,[{key:"getLocalData",value:function(){var t=this.storage.getItem(this.provider);return t?JSON.parse(t):{}}},{key:"putLocalData",value:function(t){this.storage.setItem(this.provider,JSON.stringify(t))}},{key:"get",value:function(t){var e=this;return new Promise((function(n,o){t||o(z.BAD_ID_ARG);var r=e.getLocalData();r[t]&&n(Object.assign({},r[t])),o(z.DOCUMENT_NOT_FOUND)}))}},{key:"put",value:function(t,e){var n=this;return new Promise((function(o,r){t||r(z.BAD_ID_ARG),e||r(z.BAD_DOC_ARG);var i=n.getLocalData();i[t]=Object.assign({},e),n.putLocalData(i),o()}))}},{key:"find",value:function(){var t=this;return new Promise((function(e){var n=t.getLocalData();return e(n)}))}},{key:"delete",value:function(t){var e=this;return new Promise((function(n,o){t||o(z.BAD_ID_ARG);var r=e.getLocalData();delete r[t],e.putLocalData(r),n()}))}}]),t}(),U=new G,q={name:"Editor",components:{SeEditor:R},props:["id"],data:function(){return{document:null,ready:!1,documentStorage:U}},created:function(){},mounted:function(){this.openDocument(this.id)},methods:{handleSave:function(t){var e=this;this.documentStorage&&this.documentStorage.put(this.id,t).then((function(){e.document=Object.assign({},t),console.log("saved document ".concat(t.title," (").concat(e.id,")"))})).catch((function(t){console.error("error: ".concat(t))}))},openDocument:function(t){var e=this;console.log("opening",t),this.ready=!1,this.documentStorage.get(t).then((function(n){e.document=n,e.id=t,e.ready=!0})).catch((function(n){if(n===z.DOCUMENT_NOT_FOUND)return console.log("document not found, but continuing anyway"),e.id=t,void(e.ready=!0);console.error("error: ".concat(n))}))}},watch:{id:function(t){this.openDocument(t)}}},F=q,V=Object(u["a"])(F,C,S,!1,null,null,null),J=V.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("article",{staticClass:"prose lg:prose-xl mx-auto"},[n("h2",[t._v("Your Scripts")]),n("p",{},[n("input",{staticClass:"px-4 h-9 rounded-full bg-green-500 hover:bg-green-400 text-white outline-none cursor-pointer",attrs:{type:"button",value:"New Script"},on:{click:function(e){return t.goToNewDocument()}}})]),t.ready?n("se-document-browser",{attrs:{rows:t.rows}}):t._e()],1)])},K=[],Y=(n("7db0"),n("d81d"),n("b64b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full bg-white border-indigo-500 border-2 rounded overflow-hidden"},t._l(t.rows,(function(e){return n("se-document-browser-row",{key:e.key,staticClass:"border-b border-indigo-100 hover:bg-indigo-100",class:t.rowStyle(e),attrs:{text:e.text},on:{onClick:function(){t.handleClick(e)}}},[t.isSelected(e)?[n("input",{staticClass:"rounded-full px-4 bg-indigo-500 text-white text-sm cursor-pointer outline-none hover:bg-indigo-400 capitalize h-9 my-auto",attrs:{type:"button",value:"Open"},on:{click:function(){t.handleOpen(e)}}})]:t._e()],2)})),1)}),Q=[],X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box-border w-full m-0 cursor-pointer bg-white py-1 px-2 flex flex-row",on:{click:function(e){return t.$emit("onClick")}}},[n("div",{staticClass:"flex w-1/2"},[n("span",{staticClass:"truncate"},[t._v(t._s(t.text))])]),n("div",{staticClass:"flex flex-grow ml-1 justify-end"},[t._t("default")],2)])},Z=[],tt={name:"SeDocumentBrowserRow",props:["text"]},et=tt,nt=Object(u["a"])(et,X,Z,!1,null,"31080d76",null),ot=nt.exports,rt={name:"SeDocumentBrowser",components:{SeDocumentBrowserRow:ot},props:["rows"],data:function(){return{selectedKey:null}},methods:{handleClick:function(t){this.selectedKey=t.key},handleOpen:function(t){t.onOpen&&t.onOpen(t)},isSelected:function(t){return t.key===this.selectedKey},rowStyle:function(t){return this.isSelected(t)?["bg-indigo-200","border-indigo-200","hover:bg-indigo-200"]:""}}},it=rt,at=Object(u["a"])(it,Y,Q,!1,null,"8c826e1c",null),st=at.exports,ct=n("ec26");function lt(){return Object(ct["a"])()}var ut=new G,dt={name:"EditorDocumentList",components:{SeDocumentBrowser:st},data:function(){return{ready:!1,documents:{},documentStorage:ut}},created:function(){var t=this;this.documentStorage.find().then((function(e){t.documents=e,t.ready=!0})).catch((function(t){console.error("error: ".concat(t))}))},methods:{goToNewDocument:function(){this.$router.history.push({name:"editor-document",params:{id:lt()}})}},computed:{rows:function(){var t=this;return Object.keys(this.documents).map((function(e){var n=t.documents[e];return{key:e,text:n.title,onOpen:function(){t.$router.history.push({name:"editor-document",params:{id:e}})}}}))}}},ht=dt,ft=Object(u["a"])(ht,W,K,!1,null,"110a7c54",null),mt=ft.exports;o["a"].use(g["a"]);var vt=[{path:"/",name:"Home",component:_},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/editor",name:"editor-browser",component:mt,props:!0},{path:"/editor/:id",name:"editor-document",component:J,props:!0}],pt=new g["a"]({routes:vt}),gt=pt,bt=n("2f62");o["a"].use(bt["a"]);var wt=new bt["a"].Store({state:{},mutations:{},actions:{},modules:{}});n("ba8c"),n("28e8");o["a"].config.productionTip=!1,new o["a"]({router:gt,store:wt,render:function(t){return t(p)}}).$mount("#app")},"85ec":function(t,e,n){},ba8c:function(t,e,n){},c21f:function(t,e,n){},d90d:function(t,e,n){"use strict";var o=n("3994"),r=n.n(o);r.a}});
//# sourceMappingURL=app.bbfc9215.js.map