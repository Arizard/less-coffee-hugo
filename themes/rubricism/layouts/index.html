{{ define "main" }}
	{{ $countPosts := len (where .Site.RegularPages "Section" "eq" "posts") }}
	{{ $countProjects := len (where .Site.RegularPages "Section" "eq" "projects") }}
	<main id="index-main">
		{{ $pages := where .Site.RegularPages "Section" "in" .Site.Params.mainSections }}
		{{ $first := index $pages 0 }}
		{{ with $first }}
		<div class="article-preview-container overflow-auto space-below-more">
			<div class="article-preview-hero-container">
				{{ template "partials/hero.html" . }}
			</div>
			<div class="article-preview has-text-centered space-above">
				{{ .Render "summary" }}
			</div>
			<div class="article-preview-read-more-button u-full-width space-above-more">
				<a href="{{ .Permalink }}" class="button is-centered">
					<i class="fas fa-arrow-circle-right"></i>
					Read
				</a>
			</div>
		</div>
		{{ end }}
		<table class="article-list">
			{{ range (first 3 (after 1 $pages)).GroupByDate "January 2006" }}
				<tr>
					<td>
						<div class="article-divider">{{ .Key }}</div>
					</td>
					<td>
						{{ range .Pages }}
						<div class="overflow-auto space-below-more">
							{{ .Render "summary" }}
						</div>
						{{ end }}
					</td>
				</tr>
			{{ end }}
		</table>
		<div class="index-button-group u-full-width space-above-more">
			<div class="index-button-container">
				<a href="/posts/" class="button u-full-width">
					<i class="fas fa-newspaper"></i>
					Browse {{ $countPosts }} Post{{ if ne $countPosts 1 }}s{{ end }}
				</a>
			</div>
			<div class="index-button-container">
				<a href="/projects/" class="button u-full-width">
					<i class="fas fa-lightbulb"></i>
					Browse {{ $countProjects }} Project{{ if ne $countProjects 1 }}s{{ end }}
				</a>
			</div>
			<div style="clear: both"></div>
		</div>
	</main>
{{ end }}
